<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POST api/v3/events/days</title>
    <meta name="description" content="–≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Ç–∏–ø–æ–≤ —Ñ–∏–ª—å—Ç—Ä–æ–≤ POST api/v3/events/days">
	<meta name="keywords" content="REST, API, POST, events, filters, days, method, endpoint">
	<meta name="author" content="Govorov Andrew">

	<link rel="stylesheet" href="../../../assets/styles/styles.css">
	
	<!-- Prism.js CSS -->
	<link rel="stylesheet" href="../../../assets/styles/prism.css">
</head>

<body>
	<div class="container">
		<!-- –°–∞–π–¥–±–∞—Ä —Å –¥–µ—Ä–µ–≤–æ–º —Å—Ç—Ä–∞–Ω–∏—Ü -->
		<aside class="sidebar">
			<div class="sidebar-tree">
				<div class="tree-header">–î–µ—Ä–µ–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü</div>
				<div class="tree-item">
					<div class="tree-folder">
						<span class="tree-folder-icon">üìÅ</span>
						<span class="tree-folder-name">–ì–æ–≤–æ—Ä–æ–≤ –ê–Ω–¥—Ä–µ–π –°–µ—Ä–≥–µ–µ–≤–∏—á</span>
					</div>
					<div class="tree-children">
						<div class="tree-item">
							<a href="../../../pages/govorov/about.html" class="tree-link">–û–±–æ –º–Ω–µ</a>
						</div>
						<div class="tree-item">
							<a href="../../../pages/govorov/cv.html" class="tree-link">–†–µ–∑—é–º–µ</a>
						</div>
					</div>
				</div>
				<div class="tree-item">
					<div class="tree-folder">
						<span class="tree-folder-icon">üìÅ</span>
						<span class="tree-folder-name">–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</span>
					</div>
					<div class="tree-children">
						<div class="tree-item">
							<div class="tree-folder">
								<span class="tree-folder-icon">üìÅ</span>
								<span class="tree-folder-name">–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è</span>
							</div>
							<div class="tree-children">
								<div class="tree-item">
									<a href="../../../pages/portofolio/requirements/rfilters.html" class="tree-link">–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π</a>
								</div>
							</div>
						</div>
						<div class="tree-item">
							<div class="tree-folder">
								<span class="tree-folder-icon">üìÅ</span>
								<span class="tree-folder-name">–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏</span>
							</div>
							<div class="tree-children">
								<div class="tree-item">
									<a href="../../../pages/portofolio/specifications/sfilters.html" class="tree-link">–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π</a>
								</div>
							</div>
						</div>
						<div class="tree-item">
							<div class="tree-folder">
								<span class="tree-folder-icon">üìÅ</span>
								<span class="tree-folder-name">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</span>
							</div>
							<div class="tree-children">
								<div class="tree-item">
									<a href="../../../pages/portofolio/database/events_groups.html" class="tree-link">–ì—Ä—É–ø–ø—ã —Å–æ–±—ã—Ç–∏–π</a>
								</div>
								<div class="tree-item">
									<a href="../../../pages/portofolio/database/event_types.html" class="tree-link">–¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π</a>
								</div>
								<div class="tree-item">
									<a href="../../../pages/portofolio/database/event_types_groups.html" class="tree-link">–ì—Ä—É–ø–ø—ã-—Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π</a>
								</div>
							</div>
						</div>
						<div class="tree-item">
							<div class="tree-folder">
								<span class="tree-folder-icon">üìÅ</span>
								<span class="tree-folder-name">REST API</span>
							</div>
							<div class="tree-children">
								<div class="tree-item">
									<a href="../../../pages/portofolio/api/postevents.html" class="tree-link">POST api/v3/events</a>
								</div>
								<div class="tree-item">
									<a href="../../../pages/portofolio/api/getfilters.html" class="tree-link">GET api/v3/events/filters</a>
								</div>
								<div class="tree-item">
									<a href="../../../pages/portofolio/api/postdays.html" class="tree-link active">POST api/v3/events/days</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</aside>
		
		<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
		<main class="main-content">
			<h1 id="section-1">POST api/v3/events/days</h1>

			<!-- –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ -->
			<nav class="article-toc" id="articleToc">
				<div class="toc-header">–ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ</div>
				<ul class="toc-list" id="toc">
					<!-- –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
				</ul>
			</nav>

			<!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–∞—Ç—å–∏ -->
			<article class="content">
				<!-------------------------------------------------------------------------------------------------------------------------------->
				<!--	–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π																										-->
				<!-------------------------------------------------------------------------------------------------------------------------------->
				<h1 id="section-2">–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</h1>
				<div>
					<!-- –¢–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
					<table class="confluence-table">
						<caption>–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ—Ç–æ–¥–∞</caption>
						<thead>
							<tr>
								<th>–í–µ—Ä—Å–∏—è</th>
								<th>–ê–≤—Ç–æ—Ä</th>
								<th>–î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π</th>
								<th>–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π</th>
								<th>–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–¥–∞—á—É</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>v.1.0</td>
								<td><a href="../../../pages/govorov/about.html">–ì–æ–≤–æ—Ä–æ–≤ –ê–Ω–¥—Ä–µ–π</a></td>
								<td>16.10.2023</td>
								<td>
									<p>–ò—Å—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</p>
								</td>
								<td>
									<div class="jira-issue-container">
										<span class="jira-issue">
											<a href="https://jira.example.com/browse/B2C-32519" class="jira-issue-key" target="_blank">
												<span class="jira-icon">üìã</span>
												<span style="color: white;">B2C-32519</span>
											</a>
											-
											<span class="jira-summary">
												[back] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ –¥–∞—Ç, –≤ –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∏ —Å–æ–±—ã—Ç–∏—è
											</span>
											<span class="jira-status jira-status-published">
												–û–ü–£–ë–õ–ò–ö–û–í–ê–ù–û
											</span>
										</span>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>

				<!-------------------------------------------------------------------------------------------------------------------------------->
				<!--	–ú–µ—Ç–æ–¥																													-->
				<!-------------------------------------------------------------------------------------------------------------------------------->
				<h1 id="section-3">–ú–µ—Ç–æ–¥</h1>
				<div>
					<table class="confluence-table">
						<tbody>
							<tr>
								<th>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</th>
								<td>–ó–∞–ø—Ä–æ—Å –¥–∞—Ç, –≤ –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∏ —Å–æ–±—ã—Ç–∏—è —Å —É—á—ë—Ç–æ–º —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞</td>
							</tr>
							<tr>
								<th>–°—Ç–∞—Ç—É—Å</th>
								<td>ACTIVE</td>
							</tr>
							<tr>
								<th>HTTP-–º–µ—Ç–æ–¥</th>
								<td>POST</td>
							</tr>
							<tr>
								<th>URL</th>
								<td>api/v3/events/days</td>
							</tr>
							<tr>
								<th>Swagger</th>
								<td><a href="" target="_blank">post_events_days</a></td>
							</tr>
						</tbody>
					</table>
				</div>

				<!-------------------------------------------------------------------------------------------------------------------------------->
				<!--	–ó–∞–ø—Ä–æ—Å																													-->
				<!-------------------------------------------------------------------------------------------------------------------------------->
				<h1 id="section-4">–ó–∞–ø—Ä–æ—Å</h1>
				<div>
					<!---------------------------------------------------------------------------------------------------------------------------->
					<!--	–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞																									-->
					<!---------------------------------------------------------------------------------------------------------------------------->
					<h2 id="section-5">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞</h2>
					<div>
						<table class="confluence-table">
							<thead>
								<tr>
									<th>–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞</th>
									<th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
									<th>–¢–∏–ø</th>
									<th>–§–æ—Ä–º–∞—Ç</th>
									<th>–î–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td colspan="5">–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</td>
								</tr>
							</tbody>
						</table>
					</div>

					<!---------------------------------------------------------------------------------------------------------------------------->
					<!--	–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞																										-->
					<!---------------------------------------------------------------------------------------------------------------------------->
					<h2 id="section-6">–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞</h2>
					<div>
						<table class="confluence-table">
							<thead>
								<tr>
									<th>–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞</th>
									<th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
									<th>–§–æ—Ä–º–∞—Ç</th>
									<th>–î–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>groups</td>
									<td>
										<p>–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≥—Ä—É–ø–ø–µ —Å–æ–±—ã—Ç–∏–π</p>
										<p>(id –≥—Ä—É–ø–ø—ã –∏–∑ –ë–î events_groups)</p>
									</td>
									<td>Array</td>
									<td>–ù–µ—Ç</td>
								</tr>
								<tr>
									<td>event_types</td>
									<td>
										<p>–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É —Å–æ–±—ã—Ç–∏—è</p>
										<p>(id —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è –∏–∑ –ë–î event_types)</p>
									</td>
									<td>Array</td>
									<td>–ù–µ—Ç</td>
								</tr>
								<tr>
									<td>devices</td>
									<td>–°–ø–∏—Å–æ–∫ id —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–ª—è –æ—Ç–±–æ—Ä–∞ —Å–æ–±—ã—Ç–∏–π</td>
									<td>Array</td>
									<td>–ù–µ—Ç</td>
								</tr>
								<tr>
									<td>timezone</td>
									<td>–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –¥–æ–º–∞</td>
									<td>varchar</td>
									<td>–î–∞</td>
								</tr>
							</tbody>
						</table>
					</div>

					<!---------------------------------------------------------------------------------------------------------------------------->
					<!--	–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞																										-->
					<!---------------------------------------------------------------------------------------------------------------------------->
					<h2 id="section-7">–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞</h2>
					<div>
						<!-- –ë–ª–æ–∫ –∫–æ–¥–∞ JSON -->
						<div class="code-container">
							<div class="code-header">
								<span class="code-title">–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</span>
								<div class="code-language">JSON</div>
							</div>
							<div>
								<pre><code class="language-json">
									{
										"groups": [],
										"devices": [],
										"event_types": [],
										"timezone": "Europe/Moscow"
									}
								</code></pre>
							</div>
						</div>
						<!-- –ë–ª–æ–∫ –∫–æ–¥–∞ JSON -->
						<div class="code-container">
							<div class="code-header">
								<span class="code-title">–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π</span>
								<div class="code-language">JSON</div>
							</div>
							<div>
								<pre><code class="language-json">
									{
										"groups": [5],
										"devices": [1300028],
										"event_types": [2,4],
										"timezone": "Asia/Kamchatka"
									}
								</code></pre>
							</div>
						</div>
					</div>
				</div>

				<!-------------------------------------------------------------------------------------------------------------------------------->
				<!--	–û—Ç–≤–µ—Ç																													-->
				<!-------------------------------------------------------------------------------------------------------------------------------->
				<h1 id="section-8">–û—Ç–≤–µ—Ç</h1>
				<div>
					<!---------------------------------------------------------------------------------------------------------------------------->
					<!--	–ö–æ–¥ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞																								-->
					<!---------------------------------------------------------------------------------------------------------------------------->
					<h2 id="section-9">–ö–æ–¥ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞</h2>
					<div>
						<table class="confluence-table">
							<tbody>
								<tr>
									<th>200</th>
									<td>–û–ö</td>
								</tr>
							</tbody>
						</table>
					</div>

					<!---------------------------------------------------------------------------------------------------------------------------->
					<!--	–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞																									-->
					<!---------------------------------------------------------------------------------------------------------------------------->
					<h2 id="section-10">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞</h2>
					<div>
						<table class="confluence-table">
							<thead>
								<tr>
									<th >–ù–∞–∑–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞</th>
									<th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
									<th>–§–æ—Ä–º–∞—Ç</th>
									<th>–î–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>days</td>
									<td>–ú–∞—Å—Å–∏–≤ –¥–Ω–µ–π, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã —Å–æ–±—ã—Ç–∏—è —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ —Ñ–∏–ª—å—Ç—Ä–µ</td>
									<td>Array</td>
									<td>–ù–µ—Ç</td>
								</tr>
							</tbody>
						</table>
					</div>

					<!---------------------------------------------------------------------------------------------------------------------------->
					<!--	–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞																										-->
					<!---------------------------------------------------------------------------------------------------------------------------->
					<h2 id="section-11">–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞</h2>
					<div>
						<!-- –ë–ª–æ–∫ –∫–æ–¥–∞ JSON -->
						<div class="code-container">
							<div class="code-header">
								<span class="code-title">–û—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å POST api/v3/events/days</span>
								<div class="code-language">JSON</div>
							</div>
							<div>
								<pre><code class="language-json">
									{
										"days": [
											"2023-01-01",
											"2023-02-23",
											"2023-03-08"
										]
									}
								</code></pre>
							</div>
						</div>

					</div>
				</div>

				<!-------------------------------------------------------------------------------------------------------------------------------->
				<!--	–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏																										-->
				<!-------------------------------------------------------------------------------------------------------------------------------->
				<h1 id="section-12">–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏</h1>
				<div>
					<!-- –ë–ª–æ–∫ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è -->
					<div class="confluence-macro info">
						<div class="macro-icon">üí°</div>
						<div class="macro-content">
							<strong>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</strong>
							<p>–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫: <a href="">–ö–æ–¥—ã –æ—à–∏–±–æ–∫</a></p>
						</div>
					</div>
					<table class="confluence-table">
						<caption>–°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫</caption>
						<thead>
							<tr>
								<th>–ö–æ–¥ –æ—Ç–≤–µ—Ç–∞</th>
								<th>–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞</th>
								<th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>404</td>
								<td>
									<div class="code-container">
										<div>
											<pre><code class="language-json">
												{
													"code": 404025,
													"message": "–£–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
												}
											</code></pre>
										</div>
									</div>
								</td>
								<td>
									<ul>
										<li>–ú–∞—Å—Å–∏–≤ groups –≤ –∑–∞–ø—Ä–æ—Å–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ id</li>
										<li>–ú–∞—Å—Å–∏–≤ devices –≤ –∑–∞–ø—Ä–æ—Å–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–ª–∏ —á—É–∂–∏–µ id</li>
										<li>–ú–∞—Å—Å–∏–≤ event_types –≤ –∑–∞–ø—Ä–æ—Å–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ id</li>
									</ul>
								</td>
							</tr>
							<tr>
								<td>424</td>
								<td>
									<div class="code-container">
										<div>
											<pre><code class="language-json">
												{
													"code": 424008,
													"message": "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π"
												}
											</code></pre>
										</div>
									</div>
								</td>
								<td>Estore –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç, –ª–∏–±–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É</td>
							</tr>
						</tbody>
					</table>
				</div>

				<!-------------------------------------------------------------------------------------------------------------------------------->
				<!--	–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã																											-->
				<!-------------------------------------------------------------------------------------------------------------------------------->
				<h1 id="section-13">–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã</h1>
				<div>
					<!-- –ë–ª–æ–∫ –ª–æ–≥–∏–∫–∏ -->
					<div class="complex-algorithm">
						<ol class="algorithm-list level-1">
							<li><span class="algorithm-text">–ë—ç–∫ –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å <strong>POST api/v3/events/days</strong> –∏ —Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</span>
								<ol class="algorithm-list level-2">
									<li><span class="algorithm-text">–ï—Å–ª–∏ –º–∞—Å—Å–∏–≤ <code>groups[]</code>, <code>devices[]</code>
										–∏ <code>event_types[]</code> –ø—É—Å—Ç—ã–µ, —Ç–æ –∑–∞–ø—Ä–æ—Å –¥–∞—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ –≤—Å–µ–º —Å–æ–±—ã—Ç–∏—è–º.</span></li>
									<li><span class="algorithm-text">–ï—Å–ª–∏ –º–∞—Å—Å–∏–≤ <code>groups[]</code> –∑–∞–ø–æ–ª–Ω–µ–Ω, —Ç–æ –ø–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã–º id –±—ç–∫ –Ω–∞—Ö–æ–¥–∏—Ç
										–≤—Å–µ —Å–æ–±—ã—Ç–∏—è, –≥–¥–µ –≤ join-—Ç–∞–±–ª–∏—Ü–µ <strong>event_types_groups</strong> –ø–∞—Ä–∞–º–µ—Ç—Ä <code>event_group_id</code>
										—Ä–∞–≤–µ–Ω –ø–æ–ª—É—á–µ–Ω–Ω–æ–º—É id.</span></li>
									<li><span class="algorithm-text">–ï—Å–ª–∏ –º–∞—Å—Å–∏–≤ <code>devices[]</code> –∑–∞–ø–æ–ª–Ω–µ–Ω, —Ç–æ –ø–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã–º id –±—ç–∫ –Ω–∞—Ö–æ–¥–∏—Ç
										uuid'—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å –Ω–∏–º–∏ –∑–∞–ø—Ä–æ—Å –≤ EStore.</span></li>
									<li><span class="algorithm-text">–ï—Å–ª–∏ –º–∞—Å—Å–∏–≤ <code>event_types[]</code> –∑–∞–ø–æ–ª–Ω–µ–Ω, —Ç–æ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
										–∑–∞–ø—Ä–æ—Å–∞ –¥–∞—Ç –ø–æ –≤—Å–µ–º —Å–æ–±—ã—Ç–∏—è–º, –≤—ã–±—Ä–∞–Ω–Ω—ã–º –≤ –¥–∞–Ω–Ω–æ–º —Ñ–∏–ª—å—Ç—Ä–µ.</span></li>
								</ol>
							</li>
							<li>
								<span class="algorithm-text">–ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–µ –ø–µ—Ä–µ–¥–∞–ª <code>timezone</code>, —Ç–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–≥–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è timezone —É —Å—É—â–Ω–æ—Å—Ç–∏ –î–æ–º</span>
							</li>
							<li><span class="algorithm-text">–° —É—á—ë—Ç–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤—ã—à–µ –±–µ–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ EStore <code>POST /api/estore/events/days/query</code></span>
								<ol class="algorithm-list level-2">
									<li><span class="algorithm-text">–í <code>device_uuids</code> –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è <code>uuid</code> –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π. –í –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –∫ –Ω–∞–∑–≤–∞–Ω–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ —Å–æ–±—ã—Ç–∏–π –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –¥–µ–≤–∞–π—Å—ã. –¢–∞–º –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏ <code>users.estore_uuids</code>.</span></li>
									<li><span class="algorithm-text">–î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ <code>utc_offset</code> –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ <code>timezone</code> –≤ —á–∏—Å–ª–æ–≤–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ UTC –≤ –º–∏–Ω—É—Ç–∞—Ö.</span></li>
									<li><span class="algorithm-text">–°–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å—Å—è –∏ –ø–æ —É–¥–∞–ª—ë–Ω–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º.</span></li>
								</ol>
							</li>
							<li>
								<span class="algorithm-text">–ü–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç</span>
							</li>
						</ol>
					</div>

					<!-- –ë–ª–æ–∫ –∫–æ–¥–∞ SQL -->
					<div class="code-container">
						<div class="code-header">
							<span class="code-title">–ó–∞–ø—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤</span>
							<div class="code-language">SQL</div>
						</div>
						<div>
							<pre><code class="language-sql">
								WITH
								-- –ü–æ–ª—É—á–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–æ–Ω—É –¥–æ–º–∞
								house_timezone AS (
									SELECT
										COALESCE(
											:timezone,
											(SELECT timezone FROM houses WHERE user_id = :user_id AND deleted_at IS NULL LIMIT 1),
											'UTC'
										) AS timezone
								),
								-- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–æ–Ω—É –≤ —Å–º–µ—â–µ–Ω–∏–µ –≤ –º–∏–Ω—É—Ç–∞—Ö
								timezone_offset AS (
									SELECT
										EXTRACT(EPOCH FROM (NOW() AT TIME ZONE timezone - NOW() AT TIME ZONE 'UTC')) / 60 AS utc_offset_minutes
									FROM house_timezone
								),
								-- –ü–æ–ª—É—á–∞–µ–º –≥—Ä—É–ø–ø—ã —Å–æ–±—ã—Ç–∏–π –µ—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä groups[] –∑–∞–ø–æ–ª–Ω–µ–Ω
								event_groups_filter AS (
									SELECT
										DISTINCT et.id AS event_type_id
									FROM event_type_groups etg
									INNER JOIN event_types et ON et.id = etg.event_type_id AND et.deleted_at IS NULL
									WHERE etg.event_group_id = ANY(:groups::int[])
										AND etg.deleted_at IS NULL
								),
								-- –ü–æ–ª—É—á–∞–µ–º UUID —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –µ—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä devices[] –∑–∞–ø–æ–ª–Ω–µ–Ω
								devices_uuids_filter AS (
									SELECT
										uuid
									FROM devices
									WHERE id = ANY(:devices::int[])
										AND user_id = :user_id
										AND deleted_at IS NULL
					
									UNION ALL
					
									SELECT
										uuid
									FROM cameras
									WHERE id = ANY(:devices::int[])
										AND user_id = :user_id
										AND deleted_at IS NULL
					
									UNION ALL
					
									SELECT
										uuid
									FROM controllers
									WHERE id = ANY(:devices::int[])
										AND user_id = :user_id
										AND deleted_at IS NULL
								),
								-- –ü–æ–ª—É—á–∞–µ–º UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π
								user_estore_uuid AS (
									SELECT estore_uuid
									FROM users
									WHERE id = :user_id
										AND deleted_at IS NULL
								),
								-- –§–æ—Ä–º–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö UUID –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –≤ EStore
								all_estore_uuids AS (
									-- UUID —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –µ—Å–ª–∏ –µ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä devices[]
									SELECT uuid FROM devices_uuids_filter
					
									UNION ALL
					
									-- UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π (–≤—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ–º)
									SELECT estore_uuid FROM user_estore_uuid
								),
								-- –§–æ—Ä–º–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ event_type_id –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
								event_types_filter AS (
									-- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω —Ñ–∏–ª—å—Ç—Ä groups[], –±–µ—Ä–µ–º event_type_id –∏–∑ –≥—Ä—É–ø–ø
									SELECT event_type_id FROM event_groups_filter
									WHERE array_length(:groups::int[], 1) > 0
					
									UNION
					
									-- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω —Ñ–∏–ª—å—Ç—Ä event_types[], –±–µ—Ä–µ–º –∏—Ö –Ω–∞–ø—Ä—è–º—É—é
									SELECT unnest(:event_types::int[]) AS event_type_id
									WHERE array_length(:event_types::int[], 1) > 0
								),
								-- –§–æ—Ä–º–∏—Ä—É–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ event_type_id
								final_event_types AS (
									SELECT
										CASE
											-- –ï—Å–ª–∏ –µ—Å—Ç—å —è–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –≥—Ä—É–ø–ø–∞–º –∏–ª–∏ —Ç–∏–ø–∞–º - –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö
											WHEN EXISTS (SELECT 1 FROM event_types_filter) THEN
												(SELECT ARRAY_AGG(DISTINCT event_type_id) FROM event_types_filter)
											-- –ò–Ω–∞—á–µ –±–µ—Ä–µ–º –≤—Å–µ event_types
											ELSE
												(SELECT ARRAY_AGG(id) FROM event_types WHERE deleted_at IS NULL)
										END AS event_type_ids
								),
								-- –§–æ—Ä–º–∏—Ä—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –≤ EStore
								estore_params AS (
									SELECT
										-- UUID —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
										CASE
											WHEN array_length(:devices::int[], 1) > 0 THEN
												(SELECT ARRAY_AGG(DISTINCT uuid) FROM all_estore_uuids)
											ELSE
												-- –ï—Å–ª–∏ devices[] –ø—É—Å—Ç–æ–π, –ø–æ–ª—É—á–∞–µ–º –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
												(
													SELECT ARRAY_AGG(DISTINCT uuid) FROM (
														SELECT uuid FROM devices WHERE user_id = :user_id AND deleted_at IS NULL
														UNION ALL
														SELECT uuid FROM cameras WHERE user_id = :user_id AND deleted_at IS NULL
														UNION ALL
														SELECT uuid FROM controllers WHERE user_id = :user_id AND deleted_at IS NULL
														UNION ALL
														SELECT estore_uuid FROM user_estore_uuid
													) AS all_uuids
												)
										END AS device_uuids,
					
										-- Event types
										(SELECT event_type_ids FROM final_event_types) AS event_types,
					
										-- UTC offset –≤ –º–∏–Ω—É—Ç–∞—Ö
										(SELECT utc_offset_minutes FROM timezone_offset) AS utc_offset
								)
								-- –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è EStore
								SELECT
									json_build_object(
										'device_uuids', COALESCE(ep.device_uuids, ARRAY[]::text[]),
										'event_types', COALESCE(ep.event_types, ARRAY[]::int[]),
										'utc_offset', ep.utc_offset,
										'include_deleted', true  -- –°–æ–±—ã—Ç–∏—è –ø–æ —É–¥–∞–ª–µ–Ω–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º
									) AS estore_query_params
								FROM estore_params ep;
							</code></pre>
						</div>
					</div>

					<!-- –ë–ª–æ–∫ –∫–æ–¥–∞ SQL -->
					<div class="code-container">
						<div class="code-header">
							<span class="code-title">–ó–∞–ø—Ä–æ—Å –¥–∞—Ç</span>
							<div class="code-language">SQL</div>
						</div>
						<div>
							<pre><code class="language-sql">
								-- –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞—è, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–∑–æ–≤–∞ EStore
								SELECT * FROM estore_query_events_days(
									(SELECT estore_query_params FROM main_query)
								);
							</code></pre>
						</div>
					</div>

					<p><strong>–ü–æ—è—Å–Ω–µ–Ω–∏—è –∫ –ª–æ–≥–∏–∫–µ:</strong></p>
					<ol>
						<li><strong>–í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞</strong> - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∏–ª–∏ –¥–æ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —Å–º–µ—â–µ–Ω–∏–µ –≤ –º–∏–Ω—É—Ç–∞—Ö</li>
						<li><strong>–§–∏–ª—å—Ç—Ä groups[]</strong> - –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ event_type_id, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –≥—Ä—É–ø–ø–∞–º–∏</li>
						<li><strong>–§–∏–ª—å—Ç—Ä devices[]</strong> - –ø–æ–ª—É—á–∞–µ—Ç UUID –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–ø—Ä–æ–≤–µ—Ä—è—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)</li>
						<li><strong>–§–∏–ª—å—Ç—Ä event_types[]</strong> - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ ID —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π –Ω–∞–ø—Ä—è–º—É—é</li>
						<li><strong>UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</strong> - –≤—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π</li>
						<li><strong>–£–¥–∞–ª–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</strong> - –ø–∞—Ä–∞–º–µ—Ç—Ä include_deleted: true –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∫–ª—é—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –ø–æ —É–¥–∞–ª–µ–Ω–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º</li>
					</ol>
					<p>–ó–∞–ø—Ä–æ—Å –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è EStore.</p>
				</div>
			</article>
		</main>
	</div>

	<!-- –ö–Ω–æ–ø–∫–∞ "–í–≤–µ—Ä—Ö" -->
	<button class="scroll-to-top" id="scrollToTop" aria-label="–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –Ω–∞—á–∞–ª—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã"></button>
	
	<script src="../../../assets/scripts/prism.js"></script>
	<script src="../../../assets/scripts/script.js"></script>
</body>
</html>